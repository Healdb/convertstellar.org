

<div id="container">
<HTML>
<div id="header">
<HEAD>
<TITLE>Convert Stellar</TITLE>
<meta name="viewport" content="user-scalable=no, width=device-width" />
<link rel="stylesheet" type="text/css" href="index.css">
<script src="jquery.js"></script>
<script src="inobounce.js"></script>
<script type="text/javascript" src="fetchp.js"></script>
<link href="switchery.css" rel="stylesheet" />
    <link rel="stylesheet" href="framework7.min.css">
	<script>
function parseChange(site){
	var k ="x";
	console.log("p1");
	$.getJSON('http://whateverorigin.org/get?url=' + encodeURIComponent(site) + '&callback=?', function(data){
			console.log("AHHHHHHHHHHH");
		console.log("p2");
		try {
		var str2 = data.contents;
		var str= localStorage.getItem(site); 
		  str2 = str2.replace(/(\r\n|\n|\r)/gm," ");
		  str = str.replace(/(\r\n|\n|\r)/gm," ");
		  var res2 = str.split(" ");
		  var res = str2.split(" ");
		  //console.log(res);
		  //console.log(res2);
		  for(i=0;i<res.length;i++){
               for(t=0;t<res2.length;t++){
                    if(res[i] == res2[t]){
                         res[i] = "";
                    }
               }
          }
          var st = res.toString();
          k = st.replace(/,/g , " ");
          k = k.replace(" ","");
			localStorage.setItem(site, str2);
			console.log("change" + k);
			var html = document.getElementById("htmlbox").innerHTML + k;
			$('#htmlbox').text(html);
			localStorage.setItem("htmlbox", html);
			}	
		catch(err) {
			console.log("new entry " + err);
			localStorage.setItem(site, newr);
			}
		});
	}
</script>
<script>
function clearText(){
document.getElementById("htmlbox").innerHTML = "";
localStorage.setItem("htmlbox", "");
}
</script>
	<script>
function checkSites(){
	var siteslist = localStorage.getObj("sites");
	var i = 0;
	var t = "";
	while(i<siteslist.length){
		var temp = siteslist[i];
		console.log(temp);
		parseChange(temp);
		i++;
		
	}
	$('#list').text("[" +localStorage.getObj("sites") + "]");

	}
</script>
<script>
$(document).ready(function () {
$("#body2").hide();
$("#body3").hide();
$("#body1").show();
document.getElementById("htmlbox").innerHTML = localStorage.getItem("htmlbox");
checkSites();
});
</script>
<script>
Storage.prototype.setObj = function(key, obj) {
    return this.setItem(key, JSON.stringify(obj))
}
Storage.prototype.getObj = function(key) {
    return JSON.parse(this.getItem(key))
}
</script>
</HEAD>
</div>
<!-- Views-->
    <div class="views">
      <!-- Your main view, should have "view-main" class-->
      <div class="view view-main">
        <!-- Top Navbar-->
        <div class="navbar">
          <!-- Navbar inner for Index page-->
          <div data-page="index" class="navbar-inner">
            <!-- We have home navbar without left link-->
            <div class="center sliding"><p class="top">HOMEWORK</p></div>
            <div class="right">
              <!-- Right link contains only icon - additional "icon-only" class--><a class="fastClick" id="showi">Add</a>
            </div>
          </div>
          <!-- Navbar inner for About page-->
          <div data-page="about" class="navbar-inner cached">
            <div class="left sliding"><a href="#" class="back link"> <i class="icon icon-back"></i><span>Back</span></a></div>
            <div class="center sliding">About Us</div>
          </div>
          <!-- Navbar inner for Services page-->
          <div data-page="services" class="navbar-inner cached">
            <div class="left sliding"><a href="#" class="back link"> <i class="icon icon-back"></i><span>Back</span></a></div>
            <div class="center sliding">Services</div>
          </div>
          <!-- Navbar inner for Form page-->
          <div data-page="form" class="navbar-inner cached">
            <div class="left sliding"><a href="#" class="back link"> <i class="icon icon-back"></i><span>Back</span></a></div>
            <div class="center sliding">Form</div>
          </div>
        </div>
        <!-- Pages, because we need fixed-through navbar and toolbar, it has additional appropriate classes-->
        <div class="pages navbar-through toolbar-through">
          <!-- Index Page-->
          <div data-page="index" class="page">
<BODY >
<center>
 <div class="body1" id="body1">
 <BR><BR><BR>
 <FORM NAME="myform2" ACTION="" METHOD="GET"> <BR>
<INPUT TYPE="button" NAME="button" Value="Clear Sites List" onClick="clearSites(this.form)">
</FORM>
<p id="htmlbox">Html </p>
<p id="list">  </p>
<INPUT TYPE="button" NAME="button" Value="Check Sites" onClick="checkSites(this.form)">
<INPUT TYPE="button" NAME="button" Value="Clear found text" onClick="clearText()">
</div>

<div id="body2">
<BR><BR><BR><BR><BR><BR><BR>
<form class="switchery-form">
                <p class="settings-heading">App Settings</p>
                
                <p class="setting-switch setting-switch-first">
                    <label for="setting1">Enable Dark Theme</label>
                    <!-- Switchery checkbox #1 -->
                    <input id = "theme" type="checkbox" class="js-switch js-check-change" name="setting1"/>
                </p>
            </form>
</div>
<div id="body3">
<BR><BR><BR><BR><BR><BR>
<p><font face="arial">This app provides the latest exchange rates between the digital currency Stellar, USD, Bitcoin, Ripple, and Dogecoin.</font></p>
<address><font face="arial">&copy; Copyright 2015 All Rights Reserved www.convertstellar.org</font></address>
</div>
<script type="text/javascript" src="switchery.js"></script>
    <script type="text/javascript">
    console.log(localStorage.getItem("theme"));
		if(localStorage.getItem("theme")=="true"){
        var sheet = document.styleSheets[2];
        console.log(document.styleSheets[2]);
        sheet.addRule(".page", "background: #000000; background-color: rgb(0,0,0) !important;", 1);
        var sheet = document.styleSheets[0];
        document.getElementById("theme").checked = true;
        $('#theme').prop('checked', true);
        sheet.addRule("body", "color: white !important;", 1);
        }
        else{
        var sheet = document.styleSheets[2];
        sheet.removeRule(1);
        var sheet = document.styleSheets[0];
        sheet.removeRule(1);
         $('#theme').prop('checked', false);
        }

      // Default
      // if-else statement used only for fixing <IE9 issues
      if (Array.prototype.forEach) {
        var elems = Array.prototype.slice.call(document.querySelectorAll('.js-switch'));

        elems.forEach(function(html) {
          var switchery = new Switchery(html);
        });
      } else {
        var elems = document.querySelectorAll('.js-switch');

        for (var i = 0; i < elems.length; i++) {
          var switchery = new Switchery(elems[i]);
        }
      }

      // On change
      var changeCheckbox = document.querySelector('.js-check-change')
        , changeField = document.querySelector('.js-check-change-field');

      changeCheckbox.onchange = function() {
        console.log(changeCheckbox.checked);
        if(changeCheckbox.checked==true){
        var sheet = document.styleSheets[2];
        console.log(document.styleSheets[2]);
        sheet.addRule(".page", "background: #000000; background-color: rgb(0,0,0) !important;", 1);
        var sheet = document.styleSheets[0];
        sheet.addRule("body", "color: white !important;", 1);
        localStorage.setItem("theme", true);
        }
        if(changeCheckbox.checked==false){
        var sheet = document.styleSheets[2];
        console.log(document.styleSheets[2]);
        sheet.removeRule(1);
        var sheet = document.styleSheets[0];
        sheet.removeRule(1);
        localStorage.setItem("theme", false);
        }
      };
    </script>
    </center>
    <div class="toolbar">
          <div class="toolbar-inner"><a class="fastClick" id = "shows">Settings</a><a class="fastClick" id = "showi"></a><a  id = "showa" >About</a>
        </div>
      </div>
    </div>
    </div>
    <script type="text/javascript" src="framework7.min.js"></script>
    <script>
    var myApp = new Framework7({
    fastClicks: true,
});
    </script>
<script src='fastbutton.js'></script>
<script>
      $('#showi').click(function(ev) {
	  myApp.prompt('Please input URL', 'Adding Homework Site', function (k) {
	  if(k==""){
	  	console.log("empty");
	  }
	  else{
	  addSite(k);
	  }
	  });
      }).submit(function() {
        return false;
      });
      $('#shows').click(function(ev) {
        $("#body1").hide();
        $("#body2").show();
        $("#body3").hide();
      }).submit(function() {
        return false;
      });
      $('#showa').click(function(ev) {
        $("#body1").hide();
        $("#body2").hide();
        $("#body3").show();
      }).submit(function() {
        return false;
      });
    
</script>
<script>
function clearSites(form){
localStorage.setItem("sites", "");
console.log("Sites List Cleared")
$('#list').text("[]");
}
</script>
<script>
function addSite (form) {
    var newSite = form;
	console.log(newSite);
var siteslist = [""];
try {
siteslist = localStorage.getObj("sites");
	siteslist.push(newSite);
	localStorage.setObj("sites", siteslist);
}
catch(err) {
	siteslist = [];
    console.log("empty user" + err);
	siteslist.push(newSite);
	localStorage.setObj("sites", siteslist);
	
}
console.log(localStorage.getObj("sites"));
$('#list').text("[" +localStorage.getObj("sites") + "]");
}
</script>
</center>
</HTML>
</div>
